<section class="section">
  <h2 class="title profile-type__title">Регистрация</h2>
  <%= form_for(User.new, url: registration_path(User), html: { class: "popup-form" }) do |f| %>
  <label class="popup-form__phone-label popup-form-label">Имя*</label>
  <%= f.text_field :name, class: "popup-form__phone-input popup-form-input", placeholder: "Введите имя" %>
  <label class="popup-form__phone-label popup-form-label">Логин*</label>
  <%= f.text_field :email, class: "popup-form__phone-input popup-form-input", placeholder: "Введите логин" %>
  <label class="popup-form__phone-label popup-form-label">Пароль*</label>
  <%= f.password_field :password, class: "popup-form__phone-input popup-form-input", placeholder: "Введите пароль" %>
  <div class="checkbox-box">
    <input class="contacts-form__checkbox" type="checkbox" id="check1" name="consentCheckbox">
    <label for="check1">Согласие на обработку персональных данных</label>
  </div>
  <%= f.submit "Регистрация", class: "popup-form__button button" %>
  <a href="<%= new_user_session_path %>" class="button profile-type-button">Есть аккаунт? <span class="profile-type-button__span">Вход</span></a>
  <% end %>
</section>

<script>
  document.addEventListener('DOMContentLoaded', function() {
  // Получаем ссылку на чекбокс согласия
  var consentCheckbox = document.getElementById('check1');

  // Получаем ссылку на кнопку регистрации
  var registrationButton = document.querySelector('.popup-form__button');

  // При загрузке страницы проверяем, отмечен ли чекбокс, и блокируем кнопку при необходимости
  if (!consentCheckbox.checked) {
    registrationButton.disabled = true;
  }

  // Добавляем обработчик события на изменение состояния чекбокса
  consentCheckbox.addEventListener('change', function() {
    // Если чекбокс отмечен, разблокируем кнопку, иначе блокируем
    if (consentCheckbox.checked) {
      registrationButton.disabled = false;
    } else {
      registrationButton.disabled = true;
    }
  });
});

</script>